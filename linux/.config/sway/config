# ==============================
# VARIABLES SETUP
# ==============================
set $primary_mod Mod1
set $secondary_mod Mod4

# Navigation key shortcuts
set $left h
set $down j
set $up k
set $right l

# Applications and paths
set $term ghostty
set $menu dmenu_path | wmenu | xargs swaymsg exec --
set $lock_image "/home/laurynask/Pictures/sonoma_wallpapers/Redwoods River.jpeg"
set $wallpaper_image "/home/laurynask/Pictures/sonoma_wallpapers/Redwoods River.jpeg"

# ==============================
# GENERAL SETUP
# ==============================
output * bg $wallpaper_image fill

output DP-2 {
    resolution 3840x2160
    scale 1.5
}

# ==============================
# SCREEN LOCK AND IDLE
# ==============================
exec swayidle -w \
    timeout 300 "swaylock -f -c 000000 -i $lock_image" \
    timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
    before-sleep 'swaylock -f -c 000000'

# ==============================
# INPUT CONFIGURATION
# ==============================
input * {
    natural_scroll enabled
    middle_emulation enabled
    repeat_delay 220
    repeat_rate 50
}

# ==============================
# KEY BINDINGS
# ==============================
# Basics:
# Start a terminal
bindsym $primary_mod+Return exec $term

# Kill focused window
bindsym $primary_mod+q kill

# Start your launcher
bindsym $secondary_mod+space exec $menu

# Drag floating windows by holding down $primary_mod and left mouse button.
floating_modifier $primary_mod normal

# Reload the configuration file
bindsym $primary_mod+Shift+c reload

# Lock the screen
bindsym $secondary_mod+Control+q exec swaylock -i $lock_image

# Exit sway (logs you out of your Wayland session)
bindsym $primary_mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

# ==============================
# NAVIGATION AND MOVEMENT
# ==============================
# Move your focus around
bindsym $primary_mod+$left focus left
bindsym $primary_mod+$down focus down
bindsym $primary_mod+$up focus up
bindsym $primary_mod+$right focus right
bindsym $primary_mod+Left focus left
bindsym $primary_mod+Down focus down
bindsym $primary_mod+Up focus up
bindsym $primary_mod+Right focus right

# Move the focused window
bindsym $primary_mod+Shift+$left move left
bindsym $primary_mod+Shift+$down move down
bindsym $primary_mod+Shift+$up move up
bindsym $primary_mod+Shift+$right move right
bindsym $primary_mod+Shift+Left move left
bindsym $primary_mod+Shift+Down move down
bindsym $primary_mod+Shift+Up move up
bindsym $primary_mod+Shift+Right move right

# ==============================
# WORKSPACE MANAGEMENT
# ==============================
# Switch to workspace
bindsym $primary_mod+1 workspace number 1
bindsym $primary_mod+2 workspace number 2
bindsym $primary_mod+3 workspace number 3
bindsym $primary_mod+4 workspace number 4
bindsym $primary_mod+5 workspace number 5
bindsym $primary_mod+6 workspace number 6
bindsym $primary_mod+7 workspace number 7
bindsym $primary_mod+8 workspace number 8
bindsym $primary_mod+9 workspace number 9
bindsym $primary_mod+0 workspace number 10

# Move focused container to workspace
bindsym $primary_mod+Shift+1 move container to workspace number 1
bindsym $primary_mod+Shift+2 move container to workspace number 2
bindsym $primary_mod+Shift+3 move container to workspace number 3
bindsym $primary_mod+Shift+4 move container to workspace number 4
bindsym $primary_mod+Shift+5 move container to workspace number 5
bindsym $primary_mod+Shift+6 move container to workspace number 6
bindsym $primary_mod+Shift+7 move container to workspace number 7
bindsym $primary_mod+Shift+8 move container to workspace number 8
bindsym $primary_mod+Shift+9 move container to workspace number 9
bindsym $primary_mod+Shift+0 move container to workspace number 10

# Workspace back and forth
bindsym $primary_mod+Tab workspace back_and_forth

# ==============================
# LAYOUT MANAGEMENT
# ==============================
# Split the current object of your focus
# bindsym $primary_mod+s splith
# bindsym $primary_mod+v splitv

# Switch the current container between different layout styles
bindsym $primary_mod+w layout tabbed
bindsym $primary_mod+t layout tabbed
bindsym $primary_mod+e layout toggle split

# Make the current focus fullscreen
bindsym $primary_mod+f fullscreen

# Toggle the current focus between tiling and floating mode
bindsym $primary_mod+Shift+space floating toggle

# Swap focus between the tiling area and the floating area
bindsym $primary_mod+space focus mode_toggle

# Move focus to the parent container
bindsym $primary_mod+a focus parent

# ==============================
# SCRATCHPAD MANAGEMENT
# ==============================
# Move the currently focused window to the scratchpad
bindsym $primary_mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
bindsym $primary_mod+minus scratchpad show

# ==============================
# RESIZING CONTAINERS
# ==============================
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $primary_mod+r mode "resize"

# ==============================
# FOR FLAMESHOT AND STATUS BAR
# ==============================
for_window [app_id="flameshot"] border pixel 0, floating enable, fullscreen disable, move absolute position 0 0

bar {
    position top
    mode hide
    modifier $primary_mod

    status_command while date +'%Y-%m-%d %X'; do sleep 1; done

    colors {
        statusline #ffffff
        background #323232
    }
}

# ==============================
# EXTRA EXECUTIONS AND ENVIRONMENT SETUP
# ==============================
exec mako
exec foot --server

exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec hash dbus-update-activation-environment 2>/dev/null && \
     dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

include /etc/sway/config.d/*
